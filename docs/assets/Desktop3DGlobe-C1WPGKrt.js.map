{"version":3,"file":"Desktop3DGlobe-C1WPGKrt.js","sources":["../../src/components/ui/Globe.jsx","../../src/components/ui/Desktop3DGlobe.jsx"],"sourcesContent":["import React, { useMemo, useRef, useState } from 'react';\nimport { Sphere, Stars, CatmullRomLine, Html, useTexture } from '@react-three/drei';\nimport { Vector3, NormalBlending } from 'three';\nimport { useFrame } from '@react-three/fiber';\n\nconst GLOBE_RADIUS = 3.08;\n\n// Helper function to convert latitude/longitude to a 3D vector on the sphere\nconst latLonToVector3 = (lat, lon, radius) => {\n  const phi = (90 - lat) * (Math.PI / 180);\n  const theta = (lon + 180) * (Math.PI / 180);\n  const x = -(radius * Math.sin(phi) * Math.cos(theta));\n  const z = radius * Math.sin(phi) * Math.sin(theta);\n  const y = radius * Math.cos(phi);\n  return new Vector3(x, y, z);\n};\n\n// --- Data for partners ---\nconst locations = [\n  { name: 'Seoul', lat: 37.5665, lon: 126.9780 },\n  { name: 'Berlin', lat: 52.5200, lon: 13.4050 },\n  { name: 'Wuhu', lat: 31.33, lon: 118.38 },\n  { name: 'Hong Kong', lat: 22.3193, lon: 114.1694 },\n];\n\n// --- Components for points and arcs ---\nfunction Point({ position, name }) {\n  const [hovered, setHovered] = useState(false);\n  const meshRef = useRef();\n\n  useFrame((_, delta) => {\n    if (!meshRef.current) return;\n\n    if (hovered) {\n      // Simple pulse effect - optimized\n      const targetScale = 1.2;\n      meshRef.current.scale.lerp({ x: targetScale, y: targetScale, z: targetScale }, delta * 3);\n    } else if (meshRef.current.scale.x > 1.01) {\n      meshRef.current.scale.lerp({ x: 1, y: 1, z: 1 }, delta * 5);\n    }\n  });\n\n  return (\n    <mesh\n      position={position}\n      ref={meshRef}\n      onPointerOver={() => setHovered(true)}\n      onPointerOut={() => setHovered(false)}\n    >\n      <sphereGeometry args={[0.055, 16, 16]} />\n      <meshBasicMaterial color=\"gold\" toneMapped={false} />\n      <Html\n        as='div'\n        distanceFactor={10}\n        style={{\n          transition: 'opacity 0.2s',\n          opacity: hovered ? 1 : 0,\n          pointerEvents: 'none',\n          padding: '5px 10px',\n          background: 'rgba(0, 0, 0, 0.7)',\n          color: 'white',\n          borderRadius: '5px',\n          fontSize: '14px',\n          whiteSpace: 'nowrap',\n          transform: 'translate(-50%, -150%)'\n        }}\n      >\n        {name}\n      </Html>\n    </mesh>\n  );\n}\n\nfunction Points({ points }) {\n  const positions = useMemo(() => {\n    return points.map(p => ({\n      ...p,\n      position: latLonToVector3(p.lat, p.lon, GLOBE_RADIUS + 0.02)\n    }));\n  }, [points]);\n\n  return (\n    <group>\n      {positions.map((p) => <Point key={p.name} position={p.position} name={p.name} />)}\n    </group>\n  );\n}\n\nfunction Arcs({ points }) {\n  const curves = useMemo(() => {\n    const result = [];\n    // Elevate the arc points slightly more to prevent them from clipping into the globe\n    const arcRadius = GLOBE_RADIUS + 0.05;\n    const allPointsVec = points.map(p => latLonToVector3(p.lat, p.lon, arcRadius));\n\n    for (let i = 0; i < allPointsVec.length; i++) {\n      const start = allPointsVec[i];\n      const end = allPointsVec[(i + 1) % allPointsVec.length];\n\n      const distance = start.distanceTo(end);\n      // Adjust arc height based on the distance between points\n      const heightMultiplier = 1.05 + (distance / (GLOBE_RADIUS * 2)) * 0.25;\n\n      const controlPoint = start.clone().lerp(end, 0.5).normalize().multiplyScalar(GLOBE_RADIUS * heightMultiplier);\n      result.push([start, controlPoint, end]);\n    }\n    return result;\n  }, [points]);\n\n  return (\n    <group>\n      {curves.map((curvePoints, i) => (\n        <CatmullRomLine\n          key={i}\n          points={curvePoints}\n          color=\"cyan\"\n          lineWidth={2}\n          transparent\n          opacity={0.7}\n        />\n      ))}\n    </group>\n  );\n}\n\n\nconst Globe = (props) => {\n  const {\n    ambientIntensity = 1.0,\n    directionalIntensity = 12.0,\n    metalness = 0.2,\n    roughness = 0.5,\n    emissiveIntensity = 2.5,\n    cloudsOpacity = 0.25,\n  } = props;\n\n  const [\n    dayMap,\n    nightMap,\n    cloudsMap,\n  ] = useTexture([\n    '/earth-day.jpg',\n    '/earth-night.jpg',\n    '/earth-clouds.jpg',\n  ]);\n\n  const globeRef = useRef();\n  const cloudsRef = useRef();\n\n  useFrame(({ clock }, delta) => {\n    if (globeRef.current) {\n      globeRef.current.rotation.y += delta * 0.05;\n    }\n    if (cloudsRef.current) {\n      cloudsRef.current.rotation.y += delta * 0.06;\n    }\n  });\n\n  return (\n    <>\n      <ambientLight intensity={ambientIntensity} />\n      <directionalLight position={[10, 10, 5]} intensity={directionalIntensity} />\n\n      <Stars radius={300} depth={50} count={2000} factor={4} saturation={0} fade speed={0.5} />\n\n      <group ref={globeRef}>\n        {/* Earth */}\n        <Sphere args={[GLOBE_RADIUS, 48, 48]}>\n          <meshStandardMaterial\n            map={dayMap}\n            metalness={metalness}\n            roughness={roughness}\n            emissiveMap={nightMap}\n            emissive=\"#ffffff\"\n            emissiveIntensity={emissiveIntensity}\n          />\n        </Sphere>\n\n        {/* Clouds */}\n        <Sphere\n          ref={cloudsRef}\n          args={[GLOBE_RADIUS + 0.05, 24, 24]}\n          castShadow={false}\n          receiveShadow={false}\n        >\n          <meshStandardMaterial\n            map={cloudsMap}\n            transparent\n            opacity={cloudsOpacity}\n            blending={NormalBlending}\n          />\n        </Sphere>\n\n        <Points points={locations} />\n        <Arcs points={locations} />\n      </group>\n    </>\n  );\n}\n\nexport default Globe;\n","import React, { Suspense } from 'react';\nimport { Canvas } from '@react-three/fiber';\nimport { MapControls } from '@react-three/drei';\nimport * as THREE from 'three';\nimport Globe from './Globe';\nimport Loader from './Loader';\n\n/**\n * Desktop-only 3D Globe component\n * This component is lazy-loaded to avoid loading Three.js on mobile devices\n */\nconst Desktop3DGlobe = () => {\n  return (\n    <Canvas\n      camera={{ position: [0, 0, 8], fov: 50 }}\n      dpr={[1, 1.5]}\n      performance={{ min: 0.5 }}\n    >\n      <Suspense fallback={<Loader />}>\n        <Globe />\n      </Suspense>\n      <MapControls\n        enableZoom={false}\n        enablePan={false}\n        autoRotate\n        autoRotateSpeed={0.4}\n        enableDamping\n        dampingFactor={0.05}\n        mouseButtons={{\n          LEFT: THREE.MOUSE.ROTATE,\n          MIDDLE: THREE.MOUSE.DOLLY,\n          RIGHT: THREE.MOUSE.PAN\n        }}\n      />\n    </Canvas>\n  );\n};\n\nexport default Desktop3DGlobe;\n"],"names":["GLOBE_RADIUS","latLonToVector3","lat","lon","radius","phi","theta","x","z","y","Vector3","locations","Point","position","name","hovered","setHovered","useState","meshRef","useRef","useFrame","_","delta","jsxs","jsx","Html","Points","points","positions","useMemo","p","Arcs","curves","result","arcRadius","allPointsVec","i","start","end","heightMultiplier","controlPoint","curvePoints","CatmullRomLine","Globe","props","ambientIntensity","directionalIntensity","metalness","roughness","emissiveIntensity","cloudsOpacity","dayMap","nightMap","cloudsMap","useTexture","globeRef","cloudsRef","clock","Fragment","Stars","Sphere","NormalBlending","Desktop3DGlobe","Canvas","Suspense","Loader","MapControls","THREE.MOUSE"],"mappings":"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"}