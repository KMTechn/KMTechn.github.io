{"version":3,"file":"Desktop3DGlobe-CVwMN6lo.js","sources":["../../src/components/ui/Globe.jsx","../../src/components/ui/Desktop3DGlobe.jsx"],"sourcesContent":["import React, { useMemo, useRef, useState } from 'react';\r\nimport { Sphere, Stars, CatmullRomLine, Html, useTexture } from '@react-three/drei';\r\nimport { Vector3, NormalBlending } from 'three';\r\nimport { useFrame } from '@react-three/fiber';\r\n\r\nconst GLOBE_RADIUS = 3.08;\r\n\r\n// Helper function to convert latitude/longitude to a 3D vector on the sphere\r\nconst latLonToVector3 = (lat, lon, radius) => {\r\n  const phi = (90 - lat) * (Math.PI / 180);\r\n  const theta = (lon + 180) * (Math.PI / 180);\r\n  const x = -(radius * Math.sin(phi) * Math.cos(theta));\r\n  const z = radius * Math.sin(phi) * Math.sin(theta);\r\n  const y = radius * Math.cos(phi);\r\n  return new Vector3(x, y, z);\r\n};\r\n\r\n// --- Data for partners ---\r\nconst locations = [\r\n  { name: 'Seoul', lat: 37.5665, lon: 126.9780 },\r\n  { name: 'Berlin', lat: 52.5200, lon: 13.4050 },\r\n  { name: 'Wuhu', lat: 31.33, lon: 118.38 },\r\n  { name: 'Hong Kong', lat: 22.3193, lon: 114.1694 },\r\n];\r\n\r\n// --- Components for points and arcs ---\r\nfunction Point({ position, name }) {\r\n  const [hovered, setHovered] = useState(false);\r\n  const meshRef = useRef();\r\n\r\n  useFrame((_, delta) => {\r\n    if (!meshRef.current) return;\r\n\r\n    if (hovered) {\r\n      // Simple pulse effect - optimized\r\n      const targetScale = 1.2;\r\n      meshRef.current.scale.lerp({ x: targetScale, y: targetScale, z: targetScale }, delta * 3);\r\n    } else if (meshRef.current.scale.x > 1.01) {\r\n      meshRef.current.scale.lerp({ x: 1, y: 1, z: 1 }, delta * 5);\r\n    }\r\n  });\r\n\r\n  return (\r\n    <mesh\r\n      position={position}\r\n      ref={meshRef}\r\n      onPointerOver={() => setHovered(true)}\r\n      onPointerOut={() => setHovered(false)}\r\n    >\r\n      <sphereGeometry args={[0.055, 16, 16]} />\r\n      <meshBasicMaterial color=\"gold\" toneMapped={false} />\r\n      <Html\r\n        as='div'\r\n        distanceFactor={10}\r\n        style={{\r\n          transition: 'opacity 0.2s',\r\n          opacity: hovered ? 1 : 0,\r\n          pointerEvents: 'none',\r\n          padding: '5px 10px',\r\n          background: 'rgba(0, 0, 0, 0.7)',\r\n          color: 'white',\r\n          borderRadius: '5px',\r\n          fontSize: '14px',\r\n          whiteSpace: 'nowrap',\r\n          transform: 'translate(-50%, -150%)'\r\n        }}\r\n      >\r\n        {name}\r\n      </Html>\r\n    </mesh>\r\n  );\r\n}\r\n\r\nfunction Points({ points }) {\r\n  const positions = useMemo(() => {\r\n    return points.map(p => ({\r\n      ...p,\r\n      position: latLonToVector3(p.lat, p.lon, GLOBE_RADIUS + 0.02)\r\n    }));\r\n  }, [points]);\r\n\r\n  return (\r\n    <group>\r\n      {positions.map((p) => <Point key={p.name} position={p.position} name={p.name} />)}\r\n    </group>\r\n  );\r\n}\r\n\r\nfunction Arcs({ points }) {\r\n  const curves = useMemo(() => {\r\n    const result = [];\r\n    // Elevate the arc points slightly more to prevent them from clipping into the globe\r\n    const arcRadius = GLOBE_RADIUS + 0.05;\r\n    const allPointsVec = points.map(p => latLonToVector3(p.lat, p.lon, arcRadius));\r\n\r\n    for (let i = 0; i < allPointsVec.length; i++) {\r\n      const start = allPointsVec[i];\r\n      const end = allPointsVec[(i + 1) % allPointsVec.length];\r\n\r\n      const distance = start.distanceTo(end);\r\n      // Adjust arc height based on the distance between points\r\n      const heightMultiplier = 1.05 + (distance / (GLOBE_RADIUS * 2)) * 0.25;\r\n\r\n      const controlPoint = start.clone().lerp(end, 0.5).normalize().multiplyScalar(GLOBE_RADIUS * heightMultiplier);\r\n      result.push([start, controlPoint, end]);\r\n    }\r\n    return result;\r\n  }, [points]);\r\n\r\n  return (\r\n    <group>\r\n      {curves.map((curvePoints, i) => (\r\n        <CatmullRomLine\r\n          key={i}\r\n          points={curvePoints}\r\n          color=\"cyan\"\r\n          lineWidth={2}\r\n          transparent\r\n          opacity={0.7}\r\n        />\r\n      ))}\r\n    </group>\r\n  );\r\n}\r\n\r\n\r\nconst Globe = (props) => {\r\n  const {\r\n    ambientIntensity = 1.0,\r\n    directionalIntensity = 12.0,\r\n    metalness = 0.2,\r\n    roughness = 0.5,\r\n    emissiveIntensity = 2.5,\r\n    cloudsOpacity = 0.25,\r\n  } = props;\r\n\r\n  const [\r\n    dayMap,\r\n    nightMap,\r\n    cloudsMap,\r\n  ] = useTexture([\r\n    '/earth-day.jpg',\r\n    '/earth-night.jpg',\r\n    '/earth-clouds.jpg',\r\n  ]);\r\n\r\n  const globeRef = useRef();\r\n  const cloudsRef = useRef();\r\n\r\n  useFrame(({ clock }, delta) => {\r\n    if (globeRef.current) {\r\n      globeRef.current.rotation.y += delta * 0.05;\r\n    }\r\n    if (cloudsRef.current) {\r\n      cloudsRef.current.rotation.y += delta * 0.06;\r\n    }\r\n  });\r\n\r\n  return (\r\n    <>\r\n      <ambientLight intensity={ambientIntensity} />\r\n      <directionalLight position={[10, 10, 5]} intensity={directionalIntensity} />\r\n\r\n      <Stars radius={300} depth={50} count={2000} factor={4} saturation={0} fade speed={0.5} />\r\n\r\n      <group ref={globeRef}>\r\n        {/* Earth */}\r\n        <Sphere args={[GLOBE_RADIUS, 48, 48]}>\r\n          <meshStandardMaterial\r\n            map={dayMap}\r\n            metalness={metalness}\r\n            roughness={roughness}\r\n            emissiveMap={nightMap}\r\n            emissive=\"#ffffff\"\r\n            emissiveIntensity={emissiveIntensity}\r\n          />\r\n        </Sphere>\r\n\r\n        {/* Clouds */}\r\n        <Sphere\r\n          ref={cloudsRef}\r\n          args={[GLOBE_RADIUS + 0.05, 24, 24]}\r\n          castShadow={false}\r\n          receiveShadow={false}\r\n        >\r\n          <meshStandardMaterial\r\n            map={cloudsMap}\r\n            transparent\r\n            opacity={cloudsOpacity}\r\n            blending={NormalBlending}\r\n          />\r\n        </Sphere>\r\n\r\n        <Points points={locations} />\r\n        <Arcs points={locations} />\r\n      </group>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Globe;\r\n","import React, { Suspense } from 'react';\r\nimport { Canvas } from '@react-three/fiber';\r\nimport { MapControls } from '@react-three/drei';\r\nimport * as THREE from 'three';\r\nimport Globe from './Globe';\r\nimport Loader from './Loader';\r\n\r\n/**\r\n * Desktop-only 3D Globe component\r\n * This component is lazy-loaded to avoid loading Three.js on mobile devices\r\n */\r\nconst Desktop3DGlobe = () => {\r\n  return (\r\n    <Canvas\r\n      camera={{ position: [0, 0, 8], fov: 50 }}\r\n      dpr={[1, 1.5]}\r\n      performance={{ min: 0.5 }}\r\n    >\r\n      <Suspense fallback={<Loader />}>\r\n        <Globe />\r\n      </Suspense>\r\n      <MapControls\r\n        enableZoom={false}\r\n        enablePan={false}\r\n        autoRotate\r\n        autoRotateSpeed={0.4}\r\n        enableDamping\r\n        dampingFactor={0.05}\r\n        mouseButtons={{\r\n          LEFT: THREE.MOUSE.ROTATE,\r\n          MIDDLE: THREE.MOUSE.DOLLY,\r\n          RIGHT: THREE.MOUSE.PAN\r\n        }}\r\n      />\r\n    </Canvas>\r\n  );\r\n};\r\n\r\nexport default Desktop3DGlobe;\r\n"],"names":["GLOBE_RADIUS","latLonToVector3","lat","lon","radius","phi","theta","x","z","y","Vector3","locations","Point","position","name","hovered","setHovered","useState","meshRef","useRef","useFrame","_","delta","jsxs","jsx","Html","Points","points","positions","useMemo","p","Arcs","curves","result","arcRadius","allPointsVec","i","start","end","heightMultiplier","controlPoint","curvePoints","CatmullRomLine","Globe","props","ambientIntensity","directionalIntensity","metalness","roughness","emissiveIntensity","cloudsOpacity","dayMap","nightMap","cloudsMap","useTexture","globeRef","cloudsRef","clock","Fragment","Stars","Sphere","NormalBlending","Desktop3DGlobe","Canvas","Suspense","Loader","MapControls","THREE.MOUSE"],"mappings":"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"}