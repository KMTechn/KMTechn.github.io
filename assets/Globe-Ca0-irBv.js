import{e as S,r as u,f as j,j as t,S as R,h as x,N as v,i as b,V as y,H as w}from"./three-bundle-DMG25_7Q.js";const l=3.08,M=(o,i,e)=>{const s=(90-o)*(Math.PI/180),n=(i+180)*(Math.PI/180),a=-(e*Math.sin(s)*Math.cos(n)),c=e*Math.sin(s)*Math.sin(n),r=e*Math.cos(s);return new y(a,r,c)},g=[{name:"Seoul",lat:37.5665,lon:126.978},{name:"Berlin",lat:52.52,lon:13.405},{name:"Wuhu",lat:31.33,lon:118.38},{name:"Hong Kong",lat:22.3193,lon:114.1694}];function P({position:o,name:i}){const[e,s]=u.useState(!1),n=u.useRef();return j((a,c)=>{if(e&&n.current){const r=1+Math.sin(performance.now()*.005)*.2;n.current.scale.set(r,r,r)}else n.current.scale.x>1&&n.current.scale.lerp(new y(1,1,1),c*5)}),t.jsxs("mesh",{position:o,ref:n,onPointerOver:()=>s(!0),onPointerOut:()=>s(!1),children:[t.jsx("sphereGeometry",{args:[.055,16,16]}),t.jsx("meshBasicMaterial",{color:"gold",toneMapped:!1}),t.jsx(w,{as:"div",distanceFactor:10,style:{transition:"opacity 0.2s",opacity:e?1:0,pointerEvents:"none",padding:"5px 10px",background:"rgba(0, 0, 0, 0.7)",color:"white",borderRadius:"5px",fontSize:"14px",whiteSpace:"nowrap",transform:"translate(-50%, -150%)"},children:i})]})}function E({points:o}){const i=u.useMemo(()=>o.map(e=>({...e,position:M(e.lat,e.lon,l+.02)})),[o]);return t.jsx("group",{children:i.map(e=>t.jsx(P,{position:e.position,name:e.name},e.name))})}function I({points:o}){const i=u.useMemo(()=>{const e=[],s=l+.05,n=o.map(a=>M(a.lat,a.lon,s));for(let a=0;a<n.length;a++){const c=n[a],r=n[(a+1)%n.length],h=1.05+c.distanceTo(r)/(l*2)*.25,p=c.clone().lerp(r,.5).normalize().multiplyScalar(l*h);e.push([c,p,r])}return e},[o]);return t.jsx("group",{children:i.map((e,s)=>t.jsx(b,{points:e,color:"cyan",lineWidth:2,transparent:!0,opacity:.7},s))})}const T=o=>{const{ambientIntensity:i,directionalIntensity:e,metalness:s,roughness:n,emissiveIntensity:a,cloudsOpacity:c=.4}=o,[r,m,h]=S(["/earth-day.jpg","/earth-night.jpg","/earth-clouds.jpg"]),p=u.useRef(),d=u.useRef();return j(({clock:f})=>{p.current&&(p.current.rotation.y=f.getElapsedTime()*.05),d.current&&(d.current.rotation.y=f.getElapsedTime()*.06)}),t.jsxs(t.Fragment,{children:[t.jsx("ambientLight",{intensity:i}),t.jsx("directionalLight",{position:[10,10,5],intensity:e}),t.jsx(R,{radius:300,depth:50,count:8e3,factor:5,saturation:0,fade:!1,speed:1}),t.jsxs("group",{ref:p,children:[t.jsx(x,{args:[l,32,32],children:t.jsx("meshStandardMaterial",{map:r,metalness:s,roughness:n,emissiveMap:m,emissive:"#ffffff",emissiveIntensity:a})}),t.jsx(x,{ref:d,args:[l+.05,32,32],castShadow:!1,receiveShadow:!1,children:t.jsx("meshStandardMaterial",{map:h,transparent:!0,opacity:c,blending:v})}),t.jsx(E,{points:g}),t.jsx(I,{points:g})]})]})};export{T as default};
