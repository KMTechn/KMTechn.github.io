import{j,r as p,k as n,z as y,d as v,A as w,B as S,C as b,D as x,U as I}from"./index-D0Lz__v-.js";import"./three-bundle-C_cS6wn1.js";const l=3.08,M=(o,r,e)=>{const s=(90-o)*(Math.PI/180),t=(r+180)*(Math.PI/180),a=-(e*Math.sin(s)*Math.cos(t)),c=e*Math.sin(s)*Math.sin(t),i=e*Math.cos(s);return new j(a,i,c)},f=[{name:"Seoul",lat:37.5665,lon:126.978},{name:"Berlin",lat:52.52,lon:13.405},{name:"Wuhu",lat:31.33,lon:118.38},{name:"Hong Kong",lat:22.3193,lon:114.1694}];function k({position:o,name:r}){const[e,s]=p.useState(!1),t=p.useRef();return y((a,c)=>{if(e&&t.current){const i=1+Math.sin(performance.now()*.005)*.2;t.current.scale.set(i,i,i)}else t.current.scale.x>1&&t.current.scale.lerp(new j(1,1,1),c*5)}),n.jsxs("mesh",{position:o,ref:t,onPointerOver:()=>s(!0),onPointerOut:()=>s(!1),children:[n.jsx("sphereGeometry",{args:[.055,16,16]}),n.jsx("meshBasicMaterial",{color:"gold",toneMapped:!1}),n.jsx(v,{as:"div",distanceFactor:10,style:{transition:"opacity 0.2s",opacity:e?1:0,pointerEvents:"none",padding:"5px 10px",background:"rgba(0, 0, 0, 0.7)",color:"white",borderRadius:"5px",fontSize:"14px",whiteSpace:"nowrap",transform:"translate(-50%, -150%)"},children:r})]})}function P({points:o}){const r=p.useMemo(()=>o.map(e=>({...e,position:M(e.lat,e.lon,l+.02)})),[o]);return n.jsx("group",{children:r.map(e=>n.jsx(k,{position:e.position,name:e.name},e.name))})}function R({points:o}){const r=p.useMemo(()=>{const e=[],s=l+.05,t=o.map(a=>M(a.lat,a.lon,s));for(let a=0;a<t.length;a++){const c=t[a],i=t[(a+1)%t.length],u=1.05+c.distanceTo(i)/(l*2)*.25,d=c.clone().lerp(i,.5).normalize().multiplyScalar(l*u);e.push([c,d,i])}return e},[o]);return n.jsx("group",{children:r.map((e,s)=>n.jsx(w,{points:e,color:"cyan",lineWidth:2,transparent:!0,opacity:.7},s))})}const V=o=>{const{ambientIntensity:r,directionalIntensity:e,metalness:s,roughness:t,emissiveIntensity:a,cloudsOpacity:c=.4}=o,[i,u,d]=S(["/earth-day.jpg","/earth-night.jpg","/earth-clouds.jpg"]),m=p.useRef(),h=p.useRef();return y(({clock:g})=>{m.current&&(m.current.rotation.y=g.getElapsedTime()*.05),h.current&&(h.current.rotation.y=g.getElapsedTime()*.06)}),n.jsxs(n.Fragment,{children:[n.jsx("ambientLight",{intensity:r}),n.jsx("directionalLight",{position:[10,10,5],intensity:e}),n.jsx(b,{radius:300,depth:50,count:8e3,factor:5,saturation:0,fade:!1,speed:1}),n.jsxs("group",{ref:m,children:[n.jsx(x,{args:[l,32,32],children:n.jsx("meshStandardMaterial",{map:i,metalness:s,roughness:t,emissiveMap:u,emissive:"#ffffff",emissiveIntensity:a})}),n.jsx(x,{ref:h,args:[l+.05,32,32],castShadow:!1,receiveShadow:!1,children:n.jsx("meshStandardMaterial",{map:d,transparent:!0,opacity:c,blending:I})}),n.jsx(P,{points:f}),n.jsx(R,{points:f})]})]})};export{V as default};
