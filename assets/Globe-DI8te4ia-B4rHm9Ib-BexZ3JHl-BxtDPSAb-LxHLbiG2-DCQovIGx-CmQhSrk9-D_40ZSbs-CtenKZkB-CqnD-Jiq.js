import{O as w,r as p,I as t,A as x,B as S,C as j,D as v,E as I,e as y,s as b}from"./index-lh4eiqWo.js";import"./three-bundle-BXl3LOEh.js";const l=3.08,M=(r,o,e)=>{const n=(90-r)*(Math.PI/180),s=(o+180)*(Math.PI/180),a=-(e*Math.sin(n)*Math.cos(s)),c=e*Math.sin(n)*Math.sin(s),i=e*Math.cos(n);return new y(a,i,c)},g=[{name:"Seoul",lat:37.5665,lon:126.978},{name:"Berlin",lat:52.52,lon:13.405},{name:"Wuhu",lat:31.33,lon:118.38},{name:"Hong Kong",lat:22.3193,lon:114.1694}];function O({position:r,name:o}){const[e,n]=p.useState(!1),s=p.useRef();return x((a,c)=>{if(e&&s.current){const i=1+Math.sin(performance.now()*.005)*.2;s.current.scale.set(i,i,i)}else s.current.scale.x>1&&s.current.scale.lerp(new y(1,1,1),c*5)}),t.jsxs("mesh",{position:r,ref:s,onPointerOver:()=>n(!0),onPointerOut:()=>n(!1),children:[t.jsx("sphereGeometry",{args:[.055,16,16]}),t.jsx("meshBasicMaterial",{color:"gold",toneMapped:!1}),t.jsx(b,{as:"div",distanceFactor:10,style:{transition:"opacity 0.2s",opacity:e?1:0,pointerEvents:"none",padding:"5px 10px",background:"rgba(0, 0, 0, 0.7)",color:"white",borderRadius:"5px",fontSize:"14px",whiteSpace:"nowrap",transform:"translate(-50%, -150%)"},children:o})]})}function P({points:r}){const o=p.useMemo(()=>r.map(e=>({...e,position:M(e.lat,e.lon,l+.02)})),[r]);return t.jsx("group",{children:o.map(e=>t.jsx(O,{position:e.position,name:e.name},e.name))})}function R({points:r}){const o=p.useMemo(()=>{const e=[],n=l+.05,s=r.map(a=>M(a.lat,a.lon,n));for(let a=0;a<s.length;a++){const c=s[a],i=s[(a+1)%s.length],u=1.05+c.distanceTo(i)/(l*2)*.25,d=c.clone().lerp(i,.5).normalize().multiplyScalar(l*u);e.push([c,d,i])}return e},[r]);return t.jsx("group",{children:o.map((e,n)=>t.jsx(I,{points:e,color:"cyan",lineWidth:2,transparent:!0,opacity:.7},n))})}const k=r=>{const{ambientIntensity:o,directionalIntensity:e,metalness:n,roughness:s,emissiveIntensity:a,cloudsOpacity:c=.4}=r,[i,u,d]=w(["/earth-day.jpg","/earth-night.jpg","/earth-clouds.jpg"]),h=p.useRef(),m=p.useRef();return x(({clock:f})=>{h.current&&(h.current.rotation.y=f.getElapsedTime()*.05),m.current&&(m.current.rotation.y=f.getElapsedTime()*.06)}),t.jsxs(t.Fragment,{children:[t.jsx("ambientLight",{intensity:o}),t.jsx("directionalLight",{position:[10,10,5],intensity:e}),t.jsx(S,{radius:300,depth:50,count:8e3,factor:5,saturation:0,fade:!1,speed:1}),t.jsxs("group",{ref:h,children:[t.jsx(j,{args:[l,32,32],children:t.jsx("meshStandardMaterial",{map:i,metalness:n,roughness:s,emissiveMap:u,emissive:"#ffffff",emissiveIntensity:a})}),t.jsx(j,{ref:m,args:[l+.05,32,32],castShadow:!1,receiveShadow:!1,children:t.jsx("meshStandardMaterial",{map:d,transparent:!0,opacity:c,blending:v})}),t.jsx(P,{points:g}),t.jsx(R,{points:g})]})]})};export{k as default};
